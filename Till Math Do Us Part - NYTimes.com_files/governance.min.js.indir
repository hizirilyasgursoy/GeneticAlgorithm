!function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function n(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((o=o.apply(e,n||[])).next())}))}function t(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(t=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],o=0}finally{t=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var o=[{name:"PURR_AcceptableTrackers",valueMapping:{controllers:"c",processors:"p"}},{name:"PURR_AdConfiguration",valueMapping:{full:"f",npa:"n","adluce-socrates":"s"}},{name:"PURR_DataSaleOptOutUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_DataProcessingConsentUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_AcceptableTrackers_v2",valueMapping:{controllers:"c",processors:"p",essentials:"e"}},{name:"PURR_AdConfiguration_v2",valueMapping:{full:"f",rdp:"r",npa:"n",adluce:"a","adluce-socrates":"s"}},{name:"PURR_DataProcessingPreferenceUI",valueMapping:{hide:"h","allow-opt-out":"o","allow-opt-in":"i","allow-opt-in-or-out":"a"}},{name:"PURR_DataSaleOptOutUI_v2",valueMapping:{hide:"h",show:"s","show-opted-out":"o"}},{name:"PURR_CaliforniaNoticesUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI",valueMapping:{checked:"c",unchecked:"u"}},{name:"PURR_DeleteIPAddress",valueMapping:{delete:"d",keep:"k"}},{name:"PURR_AdConfiguration_v3",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s"}},{name:"PURR_LimitSensitivePI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI_v2",valueMapping:{checked:"c",unchecked:"u","do-not-display":"d"}},{name:"PURR_AdConfiguration_v4",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s","no-ads":"a"}},{name:"PURR_TOSBlocker_v1",valueMapping:{hide:"h",show:"s"}},{name:"PURR_FidesTCF",valueMapping:{hide:"h",show:"s"}},{name:"PURR_GoogleConsentMode",valueMapping:{denied:"d",granted:"g"}}],r=function(e){var n,t,r={PURR_AcceptableTrackers:0,PURR_AdConfiguration:5,PURR_DataSaleOptOutUI:2,PURR_DataProcessingConsentUI:3,PURR_AcceptableTrackers_v2:4,PURR_AdConfiguration_v2:5,PURR_DataProcessingPreferenceUI:6,PURR_DataSaleOptOutUI_v2:7,PURR_CaliforniaNoticesUI:8,PURR_EmailMarketingOptInUI:9,PURR_DeleteIPAddress:10,PURR_AdConfiguration_v3:11,PURR_LimitSensitivePI:12,PURR_EmailMarketingOptInUI_v2:13,PURR_AdConfiguration_v4:14,PURR_TOSBlocker_v1:15,PURR_FidesTCF:16,PURR_GoogleConsentMode:17},a=(n=e,2===(t="; ".concat(document.cookie).split("; ".concat(n,"="))).length?t.pop().split(";").shift():null),i={};return Object.keys(r).forEach((function(e){var n,t,o;i[e]=(n=a,t=new RegExp("^.{".concat(r[e],"}(.)")),(null==(o=n.match(t))?void 0:o[1])||"")})),o.forEach((function(e){Object.keys(e.valueMapping).forEach((function(n){e.valueMapping[n]===i[e.name]&&(i[e.name]=n)}))})),i},a={PURR_DataSaleOptOutUI:"hide",PURR_DataSaleOptOutUI_v2:"hide",PURR_CaliforniaNoticesUI:"hide",PURR_DataProcessingConsentUI:"hide",PURR_DataProcessingPreferenceUI:"hide",PURR_AcceptableTrackers_v2:"controllers",PURR_AcceptableTrackers:"controllers",PURR_AdConfiguration_v2:"full",PURR_AdConfiguration:"full",PURR_EmailMarketingOptInUI:"unchecked",PURR_DeleteIPAddress:"delete",PURR_AdConfiguration_v3:"full",PURR_LimitSensitivePI:"hide",PURR_EmailMarketingOptInUI_v2:"unchecked",PURR_AdConfiguration_v4:"full",PURR_TOSBlocker_v1:"show",PURR_FidesTCF:"hide",PURR_GoogleConsentMode:"denied"};function i(o){var i,s=o.useNytRegiCookie,c=void 0===s||s,l=o.ccpaPrefAgent,d=void 0===l?null:l,p=o.gdprPrefAgent,u=void 0===p?null:p,f=o.env,g=void 0===f?"prd":f,m=o.autoManageAgentPrefs,h=void 0!==m&&m;return n(this,void 0,void 0,(function(){var n,o,s,l,p,f;return t(this,(function(t){switch(t.label){case 0:if(t.trys.push([0,3,,4]),function(){if("undefined"!=typeof window){var e=window.navigator.userAgent||window.navigator.vendor,n=-1!==e.indexOf("nyt_android"),t=-1!==e.indexOf("nytios"),o=-1!==e.indexOf("nyt_xwords_ios"),r=-1!==e.indexOf("Crosswords");return n||t||o||r}return!1}())return(null===(i=null===window||void 0===window?void 0:window.config)||void 0===i?void 0:i.PurrDirectives)?[2,window.config.PurrDirectives]:(m="override-purr",-1!==document.cookie.indexOf(m)?[2,r("override-purr")]:[2,e({},a)]);if(h)if(/(?:^|\.)nytimes\.com$/.test(window.location.hostname))console.warn("fetchPurrDirectives(): autoManageAgentPrefs has no effect for sites hosted under *.nytimes.com");else{if(d||u)throw new Error("received autoManageAgentPrefs, but also agent pref");n=JSON.parse(localStorage.getItem("purr-pref-agent")||"{}"),d=n.ccpa_pref_agent||"none",u=n.gdpr_pref_agent||"none"}return o=function(e,n,t,o){var r=new URL("directives","prd"===e?"https://purr.nytimes.com/v1/":"https://purr.dev.nytimes.com/v1/");n&&r.searchParams.set("ccpa_pref_agent",n);t&&r.searchParams.set("gdpr_pref_agent",t);o||r.searchParams.set("exclude_cookies","NYT-S");return r.toString()}(g,d,u,c),[4,fetch(o,{mode:"cors",credentials:"include"})];case 1:if(!(s=t.sent()).ok)throw new Error("res not ok");return[4,s.json()];case 2:return l=t.sent(),p={},Object.keys(l).forEach((function(e){var n=l[e].value;p[e]=n})),[2,p];case 3:return f=t.sent(),console.warn("canâ€™t get directives from Privacy API",f),[2,e({},a)];case 4:return[2]}var m}))}))}function s(e){return n(this,void 0,void 0,(function(){var n,o;return t(this,(function(t){switch(t.label){case 0:return n=function(e){var n=void 0===e?{}:e,t=n.useNytRegiCookie,o=void 0===t||t,r=n.env,a=new URL("purr-cache","prd"===(void 0===r?"prd":r)?"https://purr.nytimes.com/v1/":"https://purr.dev.nytimes.com/v1/");o||a.searchParams.set("exclude_cookies","NYT-S");return a}(e),[4,fetch(n,{mode:"cors",credentials:"include"})];case 1:if(!(o=t.sent()).ok)throw new Error("Response error: ".concat(o.statusText));return[2]}}))}))}function c(o,r,a){var i=void 0===a?{}:a,s=i.useNytRegiCookie,c=void 0===s||s,l=i.env,d=void 0===l?"prd":l,p=i.autoManageAgentPrefs,u=void 0!==p&&p,f=i.ccpaPrefAgent,g=void 0===f?null:f,m=i.gdprPrefAgent,h=void 0===m?null:m;return n(this,void 0,void 0,(function(){var n,a,i,s,l;return t(this,(function(t){switch(t.label){case 0:if(n=function(e,n,t,o){var r=new URL("preferences","prd"===n?"https://purr.nytimes.com/v1/":"https://purr.dev.nytimes.com/v1/");t&&r.searchParams.set("ccpa_pref_agent",t);o&&r.searchParams.set("gdpr_pref_agent",o);e||r.searchParams.set("exclude_cookies","NYT-S");return r.toString()}(c,d,g,h),!o||0===Object.keys(o).length)throw new Error("`preference` argument must be provided");return a=e(e({},o),{metadata:r&&Object.keys(r).length>0?r:void 0}),[4,fetch(n,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a),credentials:"include",mode:"cors"})];case 1:if(!(i=t.sent()).ok)throw new Error("Response error: ".concat(i.statusText));return[4,i.json()];case 2:return s=t.sent(),u&&("ccpa_pref_agent"in s||"gdpr_pref_agent"in s)&&(/(?:^|\.)nytimes\.com$/.test(window.location.hostname)?console.warn("postUserPrivacyPref(): autoManageAgentPrefs has no effect for sites hosted under *.nytimes.com"):(l=JSON.parse(localStorage.getItem("purr-pref-agent")||"{}"),s.ccpa_pref_agent?l.ccpa_pref_agent=s.ccpa_pref_agent:s.gdpr_pref_agent&&(l.gdpr_pref_agent=s.gdpr_pref_agent),localStorage.setItem("purr-pref-agent",JSON.stringify(l)))),[2,s]}}))}))}let l,d={},p={},u="/"===window.location.pathname?"homepage":"article";function f(e={}){let n=v(e),t="We No Longer Sell/Share Your Personal Information",o=R({name:"div",css:{display:"inline-block",marginRight:"10px",background:e.dnsBackground||"#fff",textAlign:e.dnsSide||"left",color:e.dnsColor||"#666",fontFamily:e.dsnFont||"franklin-normal-300, sans-serif",fontSize:"12.8px"},children:[t]});n.insertBefore(o,n.firstChild),h({event:"impression",module:{name:"DNSS opted-out indicator link",region:"footer",label:t}})}function g(e,n,t={}){let o=R({name:"div",css:{position:"fixed",bottom:"16px",right:"16px",margin:0,padding:"16px",background:t.toasterBackground||"#121212",color:t.toasterColor||"#fff",fontFamily:t.toasterFont||"franklin-normal-300, sans-serif",zIndex:9999999999},children:[e]});document.body.appendChild(o),setTimeout(()=>o.parentNode.removeChild(o),5e3),h({event:"impression",module:{name:n,label:e}})}function m(e={},n,t){let o;"nyt_et"in window&&(o=window.nyt_et.get_pageview_id()),c(n,{original_source_app:e.sourceApp||"governance.js",et_pageview_id:o},{autoManageAgentPrefs:!0}).then(()=>t()).catch(e=>t(e||new Error("Failed to save pref")))}function h(e){if("dataLayer"in window)return dataLayer.push(e),!0}function v(e){return l||(l=R({name:"div",css:{padding:"6px",zIndex:9999999999,textAlign:e.dnsSide||"left"}}),document.body.appendChild(l)),l}function R({name:e="div",attr:n,css:t,children:o}={}){let r=document.createElement(e);return n&&Object.keys(n).forEach(e=>r.setAttribute(e,n[e])),"a"===e&&(t||(t={}),t.color||(t.color="rgb(0, 0, 238)"),t.textDecoration||(t.textDecoration="underline")),t&&function(e,n={}){let t=e.style;n.fontSize||(n.fontSize="16px");Object.keys(n).forEach(e=>{let o=e.replace(/([A-Z])/g,(e,n)=>"-"+n.toLowerCase());t[o]=n[e]})}(r,t),o&&(Array.isArray(o)||(o=[o]),o.forEach(e=>{"string"==typeof e&&(e=document.createTextNode(e)),r.appendChild(e)})),r}!async function(){try{(document.cookie||"").split(/\s*;\s*/).forEach(e=>{let[n,t]=e.split(/\s*=\s*/,2);p[n.toLowerCase()]=decodeURIComponent(t)}),(document.location.search||"").replace(/^\?/,"").split(/\s*&\s*/).forEach(e=>{let[n,t]=e.split(/\s*=\s*/,2);/^dg-/.test(n)&&(t=decodeURIComponent(t),"true"===t?t=!0:"false"===t&&(t=!1),d[n.replace("dg-","")]=t)});let e=document.currentScript;e||Array.from(document.querySelectorAll("script[src]")).forEach(n=>{e||/governance\.(?:min\.)js$/.test(n.src)&&(e=n)});let n=e?e.dataset:{},t=void 0===n["no-3p"],r=d.forceNYT||/(^|\.)nytimes\.com\.?$/i.test(document.location.hostname);r&&s({useNytRegiCookie:r});let a=await i({useNytRegiCookie:r,ccpaPrefAgent:p["purr-pref-agent"],autoManageAgentPrefs:!0});!function(e,n){void 0===n&&(n=".nytimes.com");var t=o.map((function(n){var t=e[n.name];return t&&t.value&&(t=t.value),t&&n.valueMapping[t]||"_"})).join("");document.cookie="".concat("nyt-purr","=").concat(t,"; domain=").concat(n,"; path=/; max-age=").concat(31536e3,"; SameSite=Lax; Secure")}(a,r?".nytimes.com":document.location.host),h({event:"cookieSet",cookie_name:"nyt-purr"}),t&&("show"===a.PURR_DataSaleOptOutUI_v2||d.showDNS?function(e={}){let n=v(e),t="Do Not Sell/Share My Personal Information",o=R({name:"button",css:{display:"inline",border:"none",background:"transparent",color:e.dnsColor||"#666",fontFamily:e.dnsFont||"franklin-normal-300, sans-serif",fontSize:"12.8px",cursor:"pointer"},children:[t]}),r=R({name:"div",css:{display:"inline-block",marginRight:"5px",background:e.dnsBackground||"#fff",textAlign:e.dnsSide||"left"},children:[o]});o.addEventListener("click",()=>{m(e,{ccpa_pref:"opt-out"},n=>{if(n)g("An error occurred, please try again.","DNSS opt-out link snackbar message",e);else{r.parentNode.removeChild(r),f(e);g("Your preference has been stored for this browser and device. We will not sell or share your information, and you will be opted out of targeted advertising. If you clear your cookies, your preference will be forgotten.","DNSS opt-out link snackbar message",e)}}),h({event:"moduleInteraction",eventData:{pagetype:u,trigger:"module",type:"click"},module:{name:"DNSS opt-out link",region:"footer",label:t}})}),n.appendChild(r),h({event:"impression",module:{name:"DNSS opt-out link",region:"footer",label:t}})}(n):("show-opted-out"===a.PURR_DataSaleOptOutUI_v2||d.showDNSOut)&&f(n)),("show"===a.PURR_LimitSensitivePI||d.showDNS||d.showDNSOut)&&function(e={}){let n=v(e),t="Limit the Use of My Sensitive Information",o=R({name:"a",attr:{href:"https://www.nytimes.com/data-subject-request ",target:"_blank"},css:{display:"inline-block",marginRight:"5px",textDecoration:"none",background:e.dnsBackground||"#fff",textAlign:e.dsnSide||"left",color:e.dsnColor||"#666",fontFamily:e.dsnFont||"franklin-normal-300, sans-serif",fontSize:"12.8px"},children:[t]}),r=R({name:"div",css:{display:"inline-block",marginRight:"5px",background:e.dnsBackground||"#fff",textAlign:e.dnsSide||"left"},children:[o]});r.onclick=()=>(h({event:"moduleInteraction",eventData:{pagetype:u,trigger:"module",type:"click"},module:{name:"limit sensitive information link",region:"footer",label:t}}),!0),n.appendChild(r),h({event:"impression",module:{name:"limit sensitive information link",region:"footer",label:t}})}(n),("show"===a.PURR_CaliforniaNoticesUI||d.showDNS||d.showDNSOut)&&function(e={}){let n=v(e),t="California Notices",o=R({name:"a",attr:{href:"https://www.nytimes.com/privacy/privacy-policy#california-notice",target:"_blank"},css:{display:"inline-block",marginRight:"5px",textDecoration:"none",background:e.dnsBackground||"#fff",textAlign:e.dsnSide||"left",color:e.dsnColor||"#666",fontFamily:e.dsnFont||"franklin-normal-300, sans-serif",fontSize:"12.8px"},children:[t]});o.onclick=()=>(h({event:"moduleInteraction",eventData:{pagetype:u,trigger:"module",type:"click"},module:{name:"california notices link",region:"footer",label:t}}),!0),h({event:"impression",module:{name:"california notices link",region:"footer",label:t}}),n.appendChild(o)}(n),(("true"===n.checkNytGdprCookie&&p["nyt-gdpr"]&&1===parseInt(p["nyt-gdpr"],10)||d.gdpr)&&!p["nyt-t"]||"show"===a.PURR_DataProcessingConsentUI)&&function(e){let n="Your Tracker Settings",t=R({name:"strong",children:[n]}),o=R({name:"p",css:{fontFamily:"franklin-normal-500, Helvetica, sans-serif",margin:"8px 0"},children:[t]}),r=R({name:"a",attr:{href:e.gdprCookiePolicyUrl||"https://nytimes.com/cookie-policy/",target:"_blank"},children:["view our Cookie Policy"]}),a=R({name:"p",css:{fontFamily:"franklin-normal-300, Helvetica, sans-serif",lineHeight:"1.2",margin:"1em 0"},children:["We use cookies and similar methods to recognize visitors and remember their preferences. ",void 0===e.gdprCookiePurposes?"We also use them to measure ad campaign effectiveness, target ads and analyze site traffic. ":e.gdprCookiePurposes," To learn more about these methods, including how to disable them, ",r,"."]}),i=R({name:"p",css:{fontFamily:"franklin-normal-300, Helvetica, sans-serif",lineHeight:"1.2",margin:"1em 0"},children:["By clicking â€˜accept,â€™ you consent to the processing of your data by us and third parties\n           using the above methods. By clicking, â€˜reject,â€™ you are opting out of non-essential\n           trackers. You can always change your tracker preferences by visiting our Cookie Policy."]}),s=R({name:"button",attr:{title:"close dialog"},css:{position:"absolute",top:0,right:0,border:"none",background:"transparent",color:"#121212",fontFamily:"franklin-normal-300, sans-serif",fontSize:"22.4px",cursor:"pointer",padding:"16px"},children:["â¨‰"]}),c={border:"none",borderRadius:"3px",background:"#121212",color:"#fff",fontFamily:"franklin-normal-500, sans-serif",padding:"11px 12px 8px",fontSize:"12.8px",cursor:"pointer",fontWeight:"bold",textTransform:"uppercase",marginRight:"16px",minWidth:"200px"},l=R({name:"button",css:c,children:["Accept"]}),d=R({name:"button",css:c,children:["Reject"]}),f=R({name:"div",css:{paddingTop:"16px"},children:[l,d]}),v=R({name:"div",css:{maxWidth:"750px",margin:"auto"},children:[o,s,a,i,f]}),y=R({name:"div",css:{position:"fixed",overflow:"auto",bottom:"0",padding:"16px 32px",background:"#fff",left:0,right:0,borderTop:"1px solid #121212",zIndex:9999999999},children:[v]}),_=()=>y.parentNode.removeChild(y),k=(e,t)=>h({event:"moduleInteraction",eventData:{pagetype:u,trigger:"module",type:"click"},module:{name:"gdpr cookie banner v2",region:"bottom",label:n,element:{name:e,label:t}}}),P=(n,t)=>{let o=!!p["nyt-s"]?"Your preference has been saved.":"Your preference will be stored for this browser and device. If you clear your cookies, your preference will be forgotten.";k(n,t),m(e,{gdpr_pref:n},n=>{g(n?"Something went wrong. Please try again.":o,"gdpr snackbar message",e)}),_()};document.body.appendChild(y),l.onclick=()=>P("opt-in","Accept"),d.onclick=()=>P("opt-out","Reject"),s.onclick=()=>{k("dismiss","X"),_()},r.addEventListener("click",()=>h({event:"moduleInteraction",eventData:{pagetype:u,trigger:"module",type:"click"},module:{name:"gdpr cookie banner v2",region:"footer",label:n,element:{name:"goto-cookiepolicy",label:r.textContent,url:r.getAttribute("href")}}})),h({event:"impression",module:{name:"gdpr cookie banner v2",label:n,region:"bottom"}})}(n)}catch(e){console.error(e)}}()}();
